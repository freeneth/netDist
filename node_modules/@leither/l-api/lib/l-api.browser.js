!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.QxzLApi={})}(this,function(e){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var r,n=(function(e){var r=Object.create(null);r.global="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:t,function(e,t){var r=!0;try{String.fromCharCode.apply(String,new Uint8Array([1]))}catch(e){r=!1}function n(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}var i=r?function(e){return e}:n;e.generic=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return function(t){return e.apply(t,Array.prototype.slice.call(arguments,1))}},e.toBinaryString=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t=e.length;if(t<65535)return String.fromCharCode.apply(String,i(e));for(var r=32767&t,n=t>>15,a=new Array(r?n+1:n),o=0;o<n;++o)a[o]=String.fromCharCode.apply(String,i(e.subarray(o<<15,o+1<<15)));return r&&(a[n]=String.fromCharCode.apply(String,i(e.subarray(n<<15,t)))),a.join("")},e.toUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=255&e.charCodeAt(n);return r},e.toArray=n,e.parseuri=function(e){var t=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t),n=r[4].split(":",2);return{protocol:r[1],host:r[4],hostname:n[0],port:parseInt(n[1],10)||0,path:r[5],query:r[7],fragment:r[9]}},e.isObjectEmpty=function(e){var t;if(e)for(t in e)return!1;return!0}}(r),function(e,t){var r,n,i,a,o,u,s,c;function l(t,r){for(var n=t.prototype,i=0,a=r.length;i<a;i++){var o=r[i],u=n[o];"function"==typeof u&&void 0===t[o]&&Object.defineProperty(t,o,{value:e(u)})}}Function.prototype.bind||Object.defineProperty(Function.prototype,"bind",{value:function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(n.prototype=this.prototype),i.prototype=new n,i}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e){var t=Object(this),r=parseInt(t.length,10)||0;if(0===r)return!1;var n,i,a=parseInt(arguments[1],10)||0;for(a>=0?n=a:(n=r+a)<0&&(n=0);n<r;){if(e===(i=t[n])||e!=e&&i!=i)return!0;n++}return!1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this||void 0===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,i=arguments[1],a=0;a<n;a++)if(t=r[a],e.call(i,t,a,r))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null===this||void 0===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,i=arguments[1],a=0;a<n;a++)if(t=r[a],e.call(i,t,a,r))return a;return-1}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(e){if(null===this||void 0===this)throw new TypeError("this is null or not defined");for(var t=Object(this),r=t.length>>>0,n=arguments[1]>>0,i=n<0?Math.max(r+n,0):Math.min(n,r),a=arguments[2],o=void 0===a?r:a>>0,u=o<0?Math.max(r+o,0):Math.min(o,r);i<u;)t[i]=e,i++;return t}}),Array.prototype.copyWithin||Object.defineProperty(Array.prototype,"copyWithin",{value:function(e,t){if(null===this||void 0===this)throw new TypeError("this is null or not defined");var r=Object(this),n=r.length>>>0,i=e>>0,a=i<0?Math.max(n+i,0):Math.min(i,n),o=t>>0,u=o<0?Math.max(n+o,0):Math.min(o,n),s=arguments[2],c=void 0===s?n:s>>0,l=c<0?Math.max(n+c,0):Math.min(c,n),f=Math.min(l-u,n-a),h=1;for(u<a&&a<u+f&&(h=-1,u+=f-1,a+=f-1);f>0;)u in r?r[a]=r[u]:delete r[a],u+=h,a+=h,f--;return r}}),Array.from||Object.defineProperty(Array,"from",{value:(r=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===r.call(e)},i=Math.pow(2,53)-1,a=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),i)},function(e){var t=Object(e);if(null===e||void 0===e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,i=arguments.length>1?arguments[1]:void 0;if(void 0!==i){if(!n(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var o,u=a(t.length),s=n(this)?Object(new this(u)):new Array(u),c=0;c<u;)o=t[c],s[c]=i?void 0===r?i(o,c):i.call(r,o,c):o,c+=1;return s.length=u,s})}),Array.of||Object.defineProperty(Array,"of",{value:function(){return Array.prototype.slice.call(arguments)}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return t=t||0,this.substr(t,e.length)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}}),String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(){return"number"==typeof arguments[1]?!(this.length<arguments[0].length+arguments[1].length)&&this.substr(arguments[1],arguments[0].length)===arguments[0]:-1!==String.prototype.indexOf.apply(this,arguments)}}),String.prototype.repeat||Object.defineProperty(String.prototype,"repeat",{value:function(e){var t=this.toString();if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var r="";1==(1&e)&&(r+=t),0!==(e>>>=1);)t+=t;return r}}),String.prototype.trim||Object.defineProperty(String.prototype,"trim",{value:function(){return this.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{value:function(){return this.toString().replace(/^[\s\xa0]+/,"")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{value:function(){return this.toString().replace(/[\s\xa0]+$/,"")}}),Object.keys||Object.defineProperty(Object,"keys",{value:(o=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=s.length,function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)o.call(e,r)&&t.push(r);if(u)for(var n=0;n<c;n++)o.call(e,s[n])&&t.push(s[n]);return t})}),l(Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight","includes","find","findIndex"]),l(String,["quote","substring","toLowerCase","toUpperCase","charAt","charCodeAt","indexOf","lastIndexOf","include","startsWith","endsWith","repeat","trim","trimLeft","trimRight","toLocaleLowerCase","toLocaleUpperCase","match","search","replace","split","substr","concat","slice"])}(r.generic),function(e){var t="WeakMap"in e,r="Map"in e,n=!0;if(r&&(n="forEach"in new e.Map),!(t&&r&&n)){var i=Object.create(null),a=0,o=function(e){var t=Object.create(null),r=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(n,a){return this===e&&a in i&&i[a]===n?(a in t||(t[a]=Object.create(null)),t[a]):r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1})};if(t||(e.WeakMap=function e(){var t=Object.create(null),r=a++;i[r]=t;var n=function(e){if(e!==Object(e))throw new Error("value is not a non-null object");var n=e.valueOf(t,r);return n!==e.valueOf()?n:(o(e),e.valueOf(t,r))},u=Object.create(e.prototype,{get:{value:function(e){return n(e).value}},set:{value:function(e,t){n(e).value=t}},has:{value:function(e){return"value"in n(e)}},delete:{value:function(e){return delete n(e).value}},clear:{value:function(){delete i[r],r=a++,i[r]=t}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var s=arguments[0],c=0,l=s.length;c<l;c++)u.set(s[c][0],s[c][1]);return u}),!r){var u=function(){var e=Object.create(null),t=a++,r=Object.create(null);i[t]=e;var n=function(n){if(null===n)return r;var i=n.valueOf(e,t);return i!==n.valueOf()?i:(o(n),n.valueOf(e,t))};return{get:function(e){return n(e).value},set:function(e,t){n(e).value=t},has:function(e){return"value"in n(e)},delete:function(e){return delete n(e).value},clear:function(){delete i[t],t=a++,i[t]=e}}},s=function(){var e=Object.create(null);return{get:function(){return e.value},set:function(t,r){e.value=r},has:function(){return"value"in e},delete:function(){return delete e.value},clear:function(){e=Object.create(null)}}},c=function(){var e=Object.create(null);return{get:function(t){return e[t]},set:function(t,r){e[t]=r},has:function(t){return t in e},delete:function(t){return delete e[t]},clear:function(){e=Object.create(null)}}};e.Map=function e(){var t={number:c(),string:c(),boolean:c(),object:u(),function:u(),unknown:u(),undefined:s(),null:s()},r=0,n=[],i=Object.create(e.prototype,{size:{get:function(){return r}},get:{value:function(e){return t[typeof e].get(e)}},set:{value:function(e,i){this.has(e)||(n.push(e),r++),t[typeof e].set(e,i)}},has:{value:function(e){return t[typeof e].has(e)}},delete:{value:function(e){return!!this.has(e)&&(r--,n.splice(n.indexOf(e),1),t[typeof e].delete(e))}},clear:{value:function(){for(var e in n.length=0,t)t[e].clear();r=0}},forEach:{value:function(e,t){for(var r=0,i=n.length;r<i;r++)e.call(t,this.get(n[r]),n[r],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var a=arguments[0],o=0,l=a.length;o<l;o++)i.set(a[o][0],a[o][1]);return i}}if(!n){var l=e.Map;e.Map=function e(){var t=new l,r=0,n=[],i=Object.create(e.prototype,{size:{get:function(){return r}},get:{value:function(e){return t.get(e)}},set:{value:function(e,i){t.has(e)||(n.push(e),r++),t.set(e,i)}},has:{value:function(e){return t.has(e)}},delete:{value:function(e){return!!t.has(e)&&(r--,n.splice(n.indexOf(e),1),t.delete(e))}},clear:{value:function(){if("clear"in t)t.clear();else for(var e=0,i=n.length;e<i;e++)t.delete(n[e]);n.length=0,r=0}},forEach:{value:function(e,t){for(var r=0,i=n.length;r<i;r++)e.call(t,this.get(n[r]),n[r],this)}}});if(arguments.length>0&&Array.isArray(arguments[0]))for(var a=arguments[0],o=0,u=a.length;o<u;o++)i.set(a[o][0],a[o][1]);return i}}}}(r.global),function(e){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,e.TimeoutError=t}(r.global),function(e,t){if(!e.setImmediate){var r=e.document,n=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationOvserver,i={},a=1,o={};i.mutationObserver=function(){var e=[],t=r.createTextNode("");return new n(function(){for(;e.length>0;)l(e.shift())}).observe(t,{characterData:!0}),function(){var r=f(arguments);return e.push(r),t.data=1&r,r}},i.messageChannel=function(){var t=new e.MessageChannel;return t.port1.onmessage=function(e){l(Number(e.data))},function(){var e=f(arguments);return t.port2.postMessage(e),e}},i.nextTick=function(){return function(){var t=f(arguments);return e.process.nextTick(s(l,t)),t}},i.postMessage=function(){var e=r.createElement("iframe");e.style.display="none",r.documentElement.appendChild(e);var t=e.contentWindow;t.document.write('<script>window.onmessage=function(){parent.postMessage(1, "*");};<\/script>'),t.document.close();var n=[];return window.addEventListener("message",function(){for(;n.length>0;)l(n.shift())}),function(){var e=f(arguments);return n.push(e),t.postMessage(1,"*"),e}},i.readyStateChange=function(){var e=r.documentElement;return function(){var t=f(arguments),n=r.createElement("script");return n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n),t}};var u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,i.setTimeout=function(){return function(){var e=f(arguments);return u.setTimeout(s(l,e),0),e}},void 0===e.process||"[object process]"!==Object.prototype.toString.call(e.process)||e.process.browser?r&&"onreadystatechange"in r.createElement("script")?u.setImmediate=i.readyStateChange():r&&n?u.setImmediate=i.mutationObserver():e.MessageChannel?u.setImmediate=i.messageChannel():u.setImmediate=r&&"postMessage"in e&&"addEventListener"in e?i.postMessage():i.setTimeout():u.setImmediate=i.nextTick(),u.clearImmediate=c}function s(e){var r=Array.prototype.slice.call(arguments,1);return function(){e.apply(t,r)}}function c(e){delete o[e]}function l(e){var t=o[e];if(t)try{t()}finally{c(e)}}function f(e){return o[a]=s.apply(t,e),a++}}(r.global),function(e,t,r){var n=0,i="Promise"in t,a=t.setImmediate,o=t.setTimeout,u=t.clearTimeout,s=t.TimeoutError,c=Array.prototype.forEach,l=Array.prototype.slice;function f(e){var t=this;Object.defineProperties(this,{_subscribers:{value:[]},resolve:{value:this.resolve.bind(this)},reject:{value:this.reject.bind(this)}}),"function"==typeof e&&a(function(){try{t.resolve(e())}catch(e){t.reject(e)}})}function h(e){return e instanceof f}function g(e){return h(e)?e:p(e)}function v(e){var t=new f;return t.reject(e),t}function p(e){var t=new f;return t.resolve(e),t}function d(e){var t=0;return c.call(e,function(){++t}),t}function y(e){return g(e).then(function(e){var t=e.length,r=d(e),n=new Array(t);if(0===r)return n;var i=new f;return c.call(e,function(e,t){g(e).then(function(e){n[t]=e,0==--r&&i.resolve(n)},i.reject)}),i})}function w(e){return g(e).then(function(e){var t=new f;return c.call(e,function(e){g(e).fill(t)}),t})}function m(e){return!!e&&("function"==typeof e.next&&"function"==typeof e.throw)}function b(e){if(!e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||m(t.prototype))}function T(e){return function(t,n){return t instanceof Error?e.reject(t):arguments.length<2?e.resolve(t):void(1==(n=null===t||t===r?l.call(arguments,1):l.call(arguments,0)).length?e.resolve(n[0]):e.resolve(n))}}function _(e){return function(){var t=l.call(arguments,0),r=this,n=new f;t.push(function(){r=this,n.resolve(arguments)});try{e.apply(this,t)}catch(e){n.resolve([e])}return function(e){n.then(function(t){e.apply(r,t)})}}}function S(e){return function(){var t=l.call(arguments,0),r=new f;t.push(T(r));try{e.apply(this,t)}catch(e){r.reject(e)}return r}}function O(e){return b(e)||m(e)?A(e):g(e)}function A(e){var t=function(){return this}();if("function"==typeof e){var r=l.call(arguments,1);e=e.apply(t,r)}if(!e||"function"!=typeof e.next)return g(e);var n=new f;function i(t){try{o(e.next(t))}catch(e){n.reject(e)}}function a(t){try{o(e.throw(t))}catch(e){n.reject(e)}}function o(e){e.done?n.resolve(e.value):("function"==typeof e.value?function(e){if(b(e)||m(e))return A(e);var t=function(){return this}(),r=new f;return e.call(t,T(r)),r}(e.value):O(e.value)).then(i,a)}return i(),n}function j(e,t){return function(){return t=t||this,y(arguments).then(function(r){var n=e.apply(t,r);return b(n)||m(n)?A.call(t,n):n})}}function B(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.forEach(t,r)})}function E(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.every(t,r)})}function k(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.some(t,r)})}function C(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.filter(t,r)})}function I(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.map(t,r)})}function R(e,t,r){return arguments.length>2?y(e).then(function(e){return g(r).then(function(r){return e.reduce(t,r)})}):y(e).then(function(e){return e.reduce(t)})}function P(e,t,r){return arguments.length>2?y(e).then(function(e){return g(r).then(function(r){return e.reduceRight(t,r)})}):y(e).then(function(e){return e.reduceRight(t)})}function M(e,t,r){return y(e).then(function(e){return g(t).then(function(t){return e.indexOf(t,r)})})}function x(e,t,n){return y(e).then(function(e){return g(t).then(function(t){return n===r&&(n=e.length-1),e.lastIndexOf(t,n)})})}function U(e,t,r){return y(e).then(function(e){return g(t).then(function(t){return e.includes(t,r)})})}function N(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.find(t,r)})}function F(e,t,r){return r=r||function(){return this}(),y(e).then(function(e){return e.findIndex(t,r)})}function L(e,t,r){a(function(){try{var n=e(r);t.resolve(n)}catch(e){t.reject(e)}})}function D(e,t,r){e?L(e,t,r):t.resolve(r)}function W(e,t,r){e?L(e,t,r):t.reject(r)}function z(e){f.call(this),e(this.resolve,this.reject)}A.wrap=j,Object.defineProperties(f,{delayed:{value:function(e,t){var r="function"==typeof t?t:function(){return t},n=new f;return o(function(){try{n.resolve(r())}catch(e){n.reject(e)}},e),n}},error:{value:v},sync:{value:function(e){try{return p(e())}catch(e){return v(e)}}},value:{value:p},all:{value:y},race:{value:w},resolve:{value:p},reject:{value:v},promise:{value:function(e){var t=new f;return e(t.resolve,t.reject),t}},isFuture:{value:h},toFuture:{value:g},isPromise:{value:function(e){return"function"==typeof e.then}},toPromise:{value:O},join:{value:function(){return y(arguments)}},any:{value:function(e){return g(e).then(function(e){var t=e.length,r=d(e);if(0===r)throw new RangeError("any(): array must not be empty");var n=new Array(t),i=new f;return c.call(e,function(e,t){g(e).then(i.resolve,function(e){n[t]=e,0==--r&&i.reject(n)})}),i})}},settle:{value:function(e){return g(e).then(function(e){var t=e.length,r=d(e),n=new Array(t);if(0===r)return n;var i=new f;return c.call(e,function(e,t){var a=g(e);a.complete(function(){n[t]=a.inspect(),0==--r&&i.resolve(n)})}),i})}},attempt:{value:function(e){var t=function(){return this}();return y(l.call(arguments,1)).then(function(r){return e.apply(t,r)})}},run:{value:function(e,t){return y(l.call(arguments,2)).then(function(r){return e.apply(t,r)})}},thunkify:{value:_},promisify:{value:S},co:{value:A},wrap:{value:j},forEach:{value:B},every:{value:E},some:{value:k},filter:{value:C},map:{value:I},reduce:{value:R},reduceRight:{value:P},indexOf:{value:M},lastIndexOf:{value:x},includes:{value:U},find:{value:N},findIndex:{value:F}}),Object.defineProperties(f.prototype,{_value:{writable:!0},_reason:{writable:!0},_state:{value:n,writable:!0},resolve:{value:function(e){if(e!==this)if(h(e))e.fill(this);else{if(null!==e&&"object"==typeof e||"function"==typeof e){var t;try{t=e.then}catch(e){return void this.reject(e)}if("function"==typeof t){var r=!0;try{var i=this;return void t.call(e,function(e){r&&(r=!1,i.resolve(e))},function(e){r&&(r=!1,i.reject(e))})}catch(e){r&&(r=!1,this.reject(e))}return}}if(this._state===n){this._state=1,this._value=e;for(var a=this._subscribers;a.length>0;){var o=a.shift();D(o.onfulfill,o.next,e)}}}else this.reject(new TypeError("Self resolution"))}},reject:{value:function(e){if(this._state===n){this._state=2,this._reason=e;for(var t=this._subscribers;t.length>0;){var r=t.shift();W(r.onreject,r.next,e)}}}},then:{value:function(e,t){"function"!=typeof e&&(e=null),"function"!=typeof t&&(t=null);var r=new f;return 1===this._state?D(e,r,this._value):2===this._state?W(t,r,this._reason):this._subscribers.push({onfulfill:e,onreject:t,next:r}),r}},done:{value:function(e,t){this.then(e,t).then(null,function(e){a(function(){throw e})})}},inspect:{value:function(){switch(this._state){case n:return{state:"pending"};case 1:return{state:"fulfilled",value:this._value};case 2:return{state:"rejected",reason:this._reason}}}},catchError:{value:function(e,t){if("function"==typeof t){var r=this;return this.catch(function(n){if(t(n))return r.catch(e);throw n})}return this.catch(e)}},catch:{value:function(e){return this.then(null,e)}},fail:{value:function(e){this.done(null,e)}},whenComplete:{value:function(e){return this.then(function(t){return e(),t},function(t){throw e(),t})}},complete:{value:function(e){return e=e||function(e){return e},this.then(e,e)}},always:{value:function(e){this.done(e,e)}},fill:{value:function(e){this.then(e.resolve,e.reject)}},timeout:{value:function(e,t){var r=new f,n=o(function(){r.reject(t||new s("timeout"))},e);return this.whenComplete(function(){u(n)}).fill(r),r}},delay:{value:function(e){var t=new f;return this.then(function(r){o(function(){t.resolve(r)},e)},t.reject),t}},tap:{value:function(e,t){return this.then(function(r){return e.call(t,r),r})}},spread:{value:function(e,t){return this.then(function(r){return e.apply(t,r)})}},get:{value:function(e){return this.then(function(t){return t[e]})}},set:{value:function(e,t){return this.then(function(r){return r[e]=t,r})}},apply:{value:function(e,t){return t=t||[],this.then(function(r){return y(t).then(function(t){return r[e].apply(r,t)})})}},call:{value:function(e){var t=l.call(arguments,1);return this.then(function(r){return y(t).then(function(t){return r[e].apply(r,t)})})}},bind:{value:function(e){var t=l.call(arguments);if(!Array.isArray(e)){t.shift();var r=this;return Object.defineProperty(this,e,{value:function(){var n=l.call(arguments);return r.then(function(r){return y(t.concat(n)).then(function(t){return r[e].apply(r,t)})})}}),this}for(var n=0,i=e.length;n<i;++n)t[0]=e[n],this.bind.apply(this,t)}},forEach:{value:function(e,t){return B(this,e,t)}},every:{value:function(e,t){return E(this,e,t)}},some:{value:function(e,t){return k(this,e,t)}},filter:{value:function(e,t){return C(this,e,t)}},map:{value:function(e,t){return I(this,e,t)}},reduce:{value:function(e,t){return arguments.length>1?R(this,e,t):R(this,e)}},reduceRight:{value:function(e,t){return arguments.length>1?P(this,e,t):P(this,e)}},indexOf:{value:function(e,t){return M(this,e,t)}},lastIndexOf:{value:function(e,t){return x(this,e,t)}},includes:{value:function(e,t){return U(this,e,t)}},find:{value:function(e,t){return N(this,e,t)}},findIndex:{value:function(e,t){return F(this,e,t)}}}),e.Future=f,e.thunkify=_,e.promisify=S,e.co=A,e.co.wrap=e.wrap=j,e.Completer=function(){var e=new f;Object.defineProperties(this,{future:{value:e},complete:{value:e.resolve},completeError:{value:e.reject},isCompleted:{get:function(){return e._state!==n}}})},e.resolved=p,e.rejected=v,e.deferred=function(){var e=new f;return Object.create(null,{promise:{value:e},resolve:{value:e.resolve},reject:{value:e.reject}})},i||(z.prototype=Object.create(f.prototype),z.prototype.constructor=f,Object.defineProperties(z,{all:{value:y},race:{value:w},resolve:{value:p},reject:{value:v}}),t.Promise=z)}(r,r.global),function(e,t){var r=e.toBinaryString,n=new Uint8Array(0);function i(e,t,r){return e[t++]=r>>>24&255,e[t++]=r>>>16&255,e[t++]=r>>>8&255,e[t++]=255&r,t}function a(e,t,r){return e[t++]=255&r,e[t++]=r>>>8&255,e[t++]=r>>>16&255,e[t++]=r>>>24&255,t}function o(e,r){return(r===t||null===r||r<0)&&(r=e.length),0===r?["",0]:r<65535?function(e,t){for(var r=new Array(t),n=0,i=0,a=e.length;n<t&&i<a;n++){var o=e[i++];switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[n]=o;break;case 12:case 13:if(i<a){r[n]=(31&o)<<6|63&e[i++];break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(i+1<a){r[n]=(15&o)<<12|(63&e[i++])<<6|63&e[i++];break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(i+2<a){var u=((7&o)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;if(0<=u&&u<=1048575){r[n++]=u>>10&1023|55296,r[n]=1023&u|56320;break}throw new Error("Character outside valid Unicode range: 0x"+u.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+o.toString(16))}}return n<t&&(r.length=n),[String.fromCharCode.apply(String,r),i]}(e,r):function(e,t){for(var r=[],n=new Array(32768),i=0,a=0,o=e.length;i<t&&a<o;i++){var u=e[a++];switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n[i]=u;break;case 12:case 13:if(a<o){n[i]=(31&u)<<6|63&e[a++];break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(a+1<o){n[i]=(15&u)<<12|(63&e[a++])<<6|63&e[a++];break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(a+2<o){var s=((7&u)<<18|(63&e[a++])<<12|(63&e[a++])<<6|63&e[a++])-65536;if(0<=s&&s<=1048575){n[i++]=s>>10&1023|55296,n[i]=1023&s|56320;break}throw new Error("Character outside valid Unicode range: 0x"+s.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}if(i>=32766){var c=i+1;n.length=c,r.push(String.fromCharCode.apply(String,n)),t-=c,i=-1}}return i>0&&(n.length=i,r.push(String.fromCharCode.apply(String,n))),[r.join(""),a]}(e,r)}function u(){var e=arguments;switch(e.length){case 1:switch(e[0].constructor){case Uint8Array:this._bytes=e[0],this._length=e[0].length;break;case u:this._bytes=e[0].toBytes(),this._length=e[0].length;break;case String:this.writeString(e[0]);break;case Number:this._bytes=new Uint8Array(e[0]);break;default:this._bytes=new Uint8Array(e[0]),this._length=this._bytes.length}break;case 2:this._bytes=new Uint8Array(e[0],e[1]),this._length=e[1];break;case 3:this._bytes=new Uint8Array(e[0],e[1],e[2]),this._length=e[2]}this.mark()}Object.defineProperties(u.prototype,{_bytes:{value:null,writable:!0},_length:{value:0,writable:!0},_wmark:{value:0,writable:!0},_off:{value:0,writable:!0},_rmark:{value:0,writable:!0},_grow:{value:function(e){var t,r=this._bytes,n=this._length+e,i=(t=n,--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,1+(t|=t>>16));if(r){if((i*=2)>r.length){var a=new Uint8Array(i);a.set(r),this._bytes=a}}else i=Math.max(i,1024),this._bytes=new Uint8Array(i)}},length:{get:function(){return this._length}},capacity:{get:function(){return this._bytes?this._bytes.length:0}},position:{get:function(){return this._off}},bytes:{get:function(){return null===this._bytes?n:this._bytes.subarray(0,this._length)}},buffer:{get:function(){if(null===this._bytes)return n.buffer;if(this._bytes.buffer.slice)return this._bytes.buffer.slice(0,this._length);var e=new Uint8Array(this._length);return e.set(this._bytes.subarray(0,this._length)),e.buffer}},mark:{value:function(){this._wmark=this._length,this._rmark=this._off}},reset:{value:function(){this._length=this._wmark,this._off=this._rmark}},clear:{value:function(){this._bytes=null,this._length=0,this._wmark=0,this._off=0,this._rmark=0}},writeByte:{value:function(e){this._grow(1),this._bytes[this._length++]=e}},writeInt32BE:{value:function(e){if(e===(0|e)&&e<=2147483647)return this._grow(4),void(this._length=i(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeUInt32BE:{value:function(e){if(2147483648+(2147483647&e)===e&&e>=0)return this._grow(4),void(this._length=i(this._bytes,this._length,0|e));throw new TypeError("value is out of bounds")}},writeInt32LE:{value:function(e){if(e===(0|e)&&e<=2147483647)return this._grow(4),void(this._length=a(this._bytes,this._length,e));throw new TypeError("value is out of bounds")}},writeUInt32LE:{value:function(e){if(2147483648+(2147483647&e)===e&&e>=0)return this._grow(4),void(this._length=a(this._bytes,this._length,0|e));throw new TypeError("value is out of bounds")}},write:{value:function(e){var t=e.byteLength||e.length;if(0!==t){this._grow(t);var r=this._bytes,n=this._length;switch(e.constructor){case ArrayBuffer:r.set(new Uint8Array(e),n);break;case Uint8Array:r.set(e,n);break;case u:r.set(e.bytes,n);break;default:for(var i=0;i<t;i++)r[n+i]=e[i]}this._length+=t}}},writeAsciiString:{value:function(e){var t=e.length;if(0!==t){this._grow(t);for(var r=this._bytes,n=this._length,i=0;i<t;++i,++n)r[n]=e.charCodeAt(i);this._length=n}}},writeString:{value:function(e){var t=e.length;0!==t&&(this._grow(3*t),this._length=function(e,t,r){for(var n=r.length,i=0;i<n;++i){var a=r.charCodeAt(i);if(a<128)e[t++]=a;else if(a<2048)e[t++]=192|a>>6,e[t++]=128|63&a;else{if(!(a<55296||a>57343)){if(i+1<n){var o=r.charCodeAt(i+1);if(a<56320&&56320<=o&&o<=57343){var u=65536+((1023&a)<<10|1023&o);e[t++]=240|u>>18,e[t++]=128|u>>12&63,e[t++]=128|u>>6&63,e[t++]=128|63&u,++i;continue}}throw new Error("Malformed string")}e[t++]=224|a>>12,e[t++]=128|a>>6&63,e[t++]=128|63&a}}return t}(this._bytes,this._length,e))}},readByte:{value:function(){return this._off<this._length?this._bytes[this._off++]:-1}},readInt32BE:{value:function(){var e=this._bytes,t=this._off;if(t+3<this._length){var r=e[t++]<<24|e[t++]<<16|e[t++]<<8|e[t++];return this._off=t,r}throw new Error("EOF")}},readUInt32BE:{value:function(){var e=this.readInt32BE();return e<0?2147483648+(2147483647&e):e}},readInt32LE:{value:function(){var e=this._bytes,t=this._off;if(t+3<this._length){var r=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;return this._off=t,r}throw new Error("EOF")}},readUInt32LE:{value:function(){var e=this.readInt32LE();return e<0?2147483648+(2147483647&e):e}},read:{value:function(e){return this._off+e>this._length&&(e=this._length-this._off),0===e?n:this._bytes.subarray(this._off,this._off+=e)}},skip:{value:function(e){return this._off+e>this._length?(e=this._length-this._off,this._off=this._length):this._off+=e,e}},readBytes:{value:function(e){var t,r=Array.indexOf(this._bytes,e,this._off);return-1===r?(t=this._bytes.subarray(this._off,this._length),this._off=this._length):(t=this._bytes.subarray(this._off,r+1),this._off=r+1),t}},readUntil:{value:function(e){var t=Array.indexOf(this._bytes,e,this._off),r="";return t===this._off?this._off++:-1===t?(r=o(this._bytes.subarray(this._off,this._length))[0],this._off=this._length):(r=o(this._bytes.subarray(this._off,t))[0],this._off=t+1),r}},readAsciiString:{value:function(e){return this._off+e>this._length&&(e=this._length-this._off),0===e?"":r(this._bytes.subarray(this._off,this._off+=e))}},readStringAsBytes:{value:function(e){var r=function(e,r){if(r===t&&(r=e.length),0===r)return[n,0];for(var i=0,a=0,o=e.length;i<r&&a<o;i++){var u=e[a++];switch(u>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:if(a<o){a++;break}throw new Error("Unfinished UTF-8 octet sequence");case 14:if(a+1<o){a+=2;break}throw new Error("Unfinished UTF-8 octet sequence");case 15:if(a+2<o){var s=((7&u)<<18|(63&e[a++])<<12|(63&e[a++])<<6|63&e[a++])-65536;if(0<=s&&s<=1048575){i++;break}throw new Error("Character outside valid Unicode range: 0x"+s.toString(16))}throw new Error("Unfinished UTF-8 octet sequence");default:throw new Error("Bad UTF-8 encoding 0x"+u.toString(16))}}return[e.subarray(0,a),a]}(this._bytes.subarray(this._off,this._length),e);return this._off+=r[1],r[0]}},readString:{value:function(e){var t=o(this._bytes.subarray(this._off,this._length),e);return this._off+=t[1],t[0]}},takeBytes:{value:function(){var e=this.bytes;return this.clear(),e}},toBytes:{value:function(){return new Uint8Array(this.bytes)}},toString:{value:function(){return o(this.bytes,this._length)[0]}},clone:{value:function(){return new u(this.toBytes())}},trunc:{value:function(){this._bytes=this._bytes.subarray(this._off,this._length),this._length=this._bytes.length,this._off=0,this._wmark=0,this._rmark=0}}}),Object.defineProperty(u,"toString",{value:function(e){if(0===e.length)return"";switch(e.constructor){case String:return e;case u:e=e.bytes;case ArrayBuffer:e=new Uint8Array(e);case Uint8Array:return o(e,e.length)[0];default:return String.fromCharCode.apply(String,e)}}}),e.BytesIO=u}(r),function(e){e.Tags={TagInteger:105,TagLong:108,TagDouble:100,TagNull:110,TagEmpty:101,TagTrue:116,TagFalse:102,TagNaN:78,TagInfinity:73,TagDate:68,TagTime:84,TagUTC:90,TagBytes:98,TagUTF8Char:117,TagString:115,TagGuid:103,TagList:97,TagMap:109,TagClass:99,TagObject:111,TagRef:114,TagPos:43,TagNeg:45,TagSemicolon:59,TagOpenbrace:123,TagClosebrace:125,TagQuote:34,TagPoint:46,TagFunctions:70,TagCall:67,TagResult:82,TagArgument:65,TagError:69,TagEnd:122}}(r),function(e,t){var r=t.WeakMap,n=Object.create(null),i=new r;function a(e,t){i.set(e,t),n[t]=e}e.ClassManager=Object.create(null,{register:{value:a},getClassAlias:{value:function(e){return i.get(e)}},getClass:{value:function(e){return n[e]}}}),e.register=a,a(Object,"Object")}(r,r.global),function(e,t,r){var n=t.Map,i=e.BytesIO,a=e.Tags,o=e.ClassManager;function u(e){var t=e.constructor;if(!t)return"Object";var r=o.getClassAlias(t);if(r)return r;if(t.name)r=t.name;else{var n=t.toString();if(""===(r=n.substr(0,n.indexOf("(")).replace(/(^\s*function\s*)|(\s*$)/gi,""))||"Object"===r)return"function"==typeof e.getClassName?e.getClassName():"Object"}return"Object"!==r&&o.register(t,r),r}var s=Object.create(null,{set:{value:function(){}},write:{value:function(){return!1}},reset:{value:function(){}}});function c(e){Object.defineProperties(this,{_stream:{value:e},_ref:{value:new n,writable:!0}})}function l(e,t){Object.defineProperties(this,{stream:{value:e},_classref:{value:Object.create(null),writable:!0},_fieldsref:{value:[],writable:!0},_refer:{value:t?s:function(e){return new c(e)}(e)}})}function f(e,t){var o=e.stream;if(t!==r&&null!==t)switch(t.constructor){case Function:return void o.writeByte(a.TagNull);case Number:return void function(e,t){var r=e.stream;(t=t.valueOf())===(0|t)?0<=t&&t<=9?r.writeByte(t+48):(r.writeByte(a.TagInteger),r.writeAsciiString(""+t),r.writeByte(a.TagSemicolon)):isNaN(t)?r.writeByte(a.TagNaN):isFinite(t)?(r.writeByte(a.TagDouble),r.writeAsciiString(""+t),r.writeByte(a.TagSemicolon)):(r.writeByte(a.TagInfinity),r.writeByte(t>0?a.TagPos:a.TagNeg))}(e,t);case Boolean:return void v(e,t);case String:switch(t.length){case 0:return void o.writeByte(a.TagEmpty);case 1:return o.writeByte(a.TagUTF8Char),void o.writeString(t)}return void e.writeStringWithRef(t);case Date:return void e.writeDateWithRef(t);case n:return void e.writeMapWithRef(t);case ArrayBuffer:case Uint8Array:case i:return void e.writeBytesWithRef(t);case Int8Array:case Int16Array:case Int32Array:case Uint16Array:case Uint32Array:return void function(e,t){e._refer.write(t)||b(e,t,h)}(e,t);case Float32Array:case Float64Array:return void function(e,t){e._refer.write(t)||b(e,t,g)}(e,t);default:if(Array.isArray(t))e.writeListWithRef(t);else"Object"===u(t)?e.writeMapWithRef(t):e.writeObjectWithRef(t)}else o.writeByte(a.TagNull)}function h(e,t){var r=e.stream;0<=t&&t<=9?r.writeByte(t+48):(t<-2147483648||t>2147483647?r.writeByte(a.TagLong):r.writeByte(a.TagInteger),r.writeAsciiString(""+t),r.writeByte(a.TagSemicolon))}function g(e,t){var r=e.stream;isNaN(t)?r.writeByte(a.TagNaN):isFinite(t)?(r.writeByte(a.TagDouble),r.writeAsciiString(""+t),r.writeByte(a.TagSemicolon)):(r.writeByte(a.TagInfinity),r.writeByte(t>0?a.TagPos:a.TagNeg))}function v(e,t){e.stream.writeByte(t.valueOf()?a.TagTrue:a.TagFalse)}function p(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getUTCFullYear()).slice(-4),i=("00"+(t.getUTCMonth()+1)).slice(-2),o=("00"+t.getUTCDate()).slice(-2),u=("00"+t.getUTCHours()).slice(-2),s=("00"+t.getUTCMinutes()).slice(-2),c=("00"+t.getUTCSeconds()).slice(-2),l=("000"+t.getUTCMilliseconds()).slice(-3);r.writeByte(a.TagDate),r.writeAsciiString(n+i+o),r.writeByte(a.TagTime),r.writeAsciiString(u+s+c),"000"!==l&&(r.writeByte(a.TagPoint),r.writeAsciiString(l)),r.writeByte(a.TagUTC)}function d(e,t){e._refer.set(t);var r=e.stream,n=("0000"+t.getFullYear()).slice(-4),i=("00"+(t.getMonth()+1)).slice(-2),o=("00"+t.getDate()).slice(-2),u=("00"+t.getHours()).slice(-2),s=("00"+t.getMinutes()).slice(-2),c=("00"+t.getSeconds()).slice(-2),l=("000"+t.getMilliseconds()).slice(-3);"00"===u&&"00"===s&&"00"===c&&"000"===l?(r.writeByte(a.TagDate),r.writeAsciiString(n+i+o)):"1970"===n&&"01"===i&&"01"===o?(r.writeByte(a.TagTime),r.writeAsciiString(u+s+c),"000"!==l&&(r.writeByte(a.TagPoint),r.writeAsciiString(l))):(r.writeByte(a.TagDate),r.writeAsciiString(n+i+o),r.writeByte(a.TagTime),r.writeAsciiString(u+s+c),"000"!==l&&(r.writeByte(a.TagPoint),r.writeAsciiString(l))),r.writeByte(a.TagSemicolon)}function y(e,t){e._refer.set(t);var r=e.stream,n=("00"+t.getHours()).slice(-2),i=("00"+t.getMinutes()).slice(-2),o=("00"+t.getSeconds()).slice(-2),u=("000"+t.getMilliseconds()).slice(-3);r.writeByte(a.TagTime),r.writeAsciiString(n+i+o),"000"!==u&&(r.writeByte(a.TagPoint),r.writeAsciiString(u)),r.writeByte(a.TagSemicolon)}function w(e,t){e._refer.set(t);var r=e.stream;r.writeByte(a.TagBytes);var n=t.byteLength||t.length;n>0?(r.writeAsciiString(""+n),r.writeByte(a.TagQuote),r.write(t)):r.writeByte(a.TagQuote),r.writeByte(a.TagQuote)}function m(e,t){e._refer.set(t);var r=e.stream,n=t.length;r.writeByte(a.TagString),n>0?(r.writeAsciiString(""+n),r.writeByte(a.TagQuote),r.writeString(t)):r.writeByte(a.TagQuote),r.writeByte(a.TagQuote)}function b(e,t,r){e._refer.set(t);var n=e.stream,i=t.length;if(n.writeByte(a.TagList),i>0){n.writeAsciiString(""+i),n.writeByte(a.TagOpenbrace);for(var o=0;o<i;o++)r(e,t[o])}else n.writeByte(a.TagOpenbrace);n.writeByte(a.TagClosebrace)}function T(e,t){e._refer.set(t);var r=e.stream,n=[];for(var i in t)t.hasOwnProperty(i)&&"function"!=typeof t[i]&&(n[n.length]=i);var o=n.length;if(r.writeByte(a.TagMap),o>0){r.writeAsciiString(""+o),r.writeByte(a.TagOpenbrace);for(var u=0;u<o;u++)f(e,n[u]),f(e,t[n[u]])}else r.writeByte(a.TagOpenbrace);r.writeByte(a.TagClosebrace)}function _(e,t){e._refer.set(t);var r=e.stream,n=t.size;r.writeByte(a.TagMap),n>0?(r.writeAsciiString(""+n),r.writeByte(a.TagOpenbrace),t.forEach(function(t,r){f(e,r),f(e,t)})):r.writeByte(a.TagOpenbrace),r.writeByte(a.TagClosebrace)}function S(e,t){var r,n,i=e.stream,o=u(t);if(o in e._classref)n=e._classref[o],r=e._fieldsref[n];else{for(var s in r=[],t)t.hasOwnProperty(s)&&"function"!=typeof t[s]&&(r[r.length]=s.toString());n=function(e,t,r){var n=e.stream,i=r.length;if(n.writeByte(a.TagClass),n.writeAsciiString(""+t.length),n.writeByte(a.TagQuote),n.writeString(t),n.writeByte(a.TagQuote),i>0){n.writeAsciiString(""+i),n.writeByte(a.TagOpenbrace);for(var o=0;o<i;o++)m(e,r[o])}else n.writeByte(a.TagOpenbrace);n.writeByte(a.TagClosebrace);var u=e._fieldsref.length;return e._classref[t]=u,e._fieldsref[u]=r,u}(e,o,r)}i.writeByte(a.TagObject),i.writeAsciiString(""+n),i.writeByte(a.TagOpenbrace),e._refer.set(t);for(var c=r.length,l=0;l<c;l++)f(e,t[r[l]]);i.writeByte(a.TagClosebrace)}Object.defineProperties(c.prototype,{_refcount:{value:0,writable:!0},set:{value:function(e){this._ref.set(e,this._refcount++)}},write:{value:function(e){var t=this._ref.get(e);return t!==r&&(this._stream.writeByte(a.TagRef),this._stream.writeString(""+t),this._stream.writeByte(a.TagSemicolon),!0)}},reset:{value:function(){this._ref=new n,this._refcount=0}}}),Object.defineProperties(l.prototype,{serialize:{value:function(e){f(this,e)}},writeInteger:{value:function(e){h(this,e)}},writeDouble:{value:function(e){g(this,e)}},writeBoolean:{value:function(e){v(this,e)}},writeUTCDate:{value:function(e){p(this,e)}},writeUTCDateWithRef:{value:function(e){this._refer.write(e)||p(this,e)}},writeDate:{value:function(e){d(this,e)}},writeDateWithRef:{value:function(e){this._refer.write(e)||d(this,e)}},writeTime:{value:function(e){y(this,e)}},writeTimeWithRef:{value:function(e){this._refer.write(e)||y(this,e)}},writeBytes:{value:function(e){w(this,e)}},writeBytesWithRef:{value:function(e){this._refer.write(e)||w(this,e)}},writeString:{value:function(e){m(this,e)}},writeStringWithRef:{value:function(e){this._refer.write(e)||m(this,e)}},writeList:{value:function(e){b(this,e,f)}},writeListWithRef:{value:function(e){this._refer.write(e)||b(this,e,f)}},writeMap:{value:function(e){e instanceof n?_(this,e):T(this,e)}},writeMapWithRef:{value:function(e){this._refer.write(e)||(e instanceof n?_(this,e):T(this,e))}},writeObject:{value:function(e){S(this,e)}},writeObjectWithRef:{value:function(e){this._refer.write(e)||S(this,e)}},reset:{value:function(){this._classref=Object.create(null),this._fieldsref.length=0,this._refer.reset()}}}),e.Writer=l}(r,r.global),function(e,t,r){var n=t.Map,i=e.BytesIO,a=e.Tags,o=e.ClassManager;function u(e,t){if(e&&t){var r="";throw r="number"==typeof t?String.fromCharCode(t):String.fromCharCode.apply(String,t),new Error('Tag "'+r+'" expected, but "'+String.fromCharCode(e)+'" found in stream')}throw e?new Error('Unexpected serialize tag "'+String.fromCharCode(e)+'" in stream'):new Error("No byte found in stream")}function s(e,t){c(e,t,e.readByte())}function c(e,t,r){switch(t.writeByte(r),r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case a.TagNull:case a.TagEmpty:case a.TagTrue:case a.TagFalse:case a.TagNaN:break;case a.TagInfinity:t.writeByte(e.readByte());break;case a.TagInteger:case a.TagLong:case a.TagDouble:case a.TagRef:!function(e,t){var r;do{r=e.readByte(),t.writeByte(r)}while(r!==a.TagSemicolon)}(e,t);break;case a.TagDate:case a.TagTime:!function(e,t){var r;do{r=e.readByte(),t.writeByte(r)}while(r!==a.TagSemicolon&&r!==a.TagUTC)}(e,t);break;case a.TagUTF8Char:!function(e,t){t.writeString(e.readString(1))}(e,t);break;case a.TagBytes:!function(e,t){var r=0,n=48;do{r*=10,r+=n-48,n=e.readByte(),t.writeByte(n)}while(n!==a.TagQuote);t.write(e.read(r+1))}(e,t);break;case a.TagString:!function(e,t){var r=0,n=48;do{r*=10,r+=n-48,n=e.readByte(),t.writeByte(n)}while(n!==a.TagQuote);t.write(e.readStringAsBytes(r+1))}(e,t);break;case a.TagGuid:!function(e,t){t.write(e.read(38))}(e,t);break;case a.TagList:case a.TagMap:case a.TagObject:l(e,t);break;case a.TagClass:l(e,t),s(e,t);break;case a.TagError:s(e,t);break;default:u(r)}}function l(e,t){var r;do{r=e.readByte(),t.writeByte(r)}while(r!==a.TagOpenbrace);for(;(r=e.readByte())!==a.TagClosebrace;)c(e,t,r);t.writeByte(r)}function f(e){Object.defineProperties(this,{stream:{value:e},readRaw:{value:function(){return function(e){var t=new i;return s(e,t),t.bytes}(e)}}})}e.RawReader=f;var h=Object.create(null,{set:{value:function(){}},read:{value:function(){u(a.TagRef)}},reset:{value:function(){}}});function g(){Object.defineProperties(this,{ref:{value:[]}})}function v(e){var n,i=t,a=e.split(".");for(n=0;n<a.length;n++)if((i=i[a[n]])===r)return null;return i}function p(e,t,r,n){if(r<t.length){e[t[r]]=n;var i=p(e,t,r+1,".");return r+1<t.length&&null===i&&(i=p(e,t,r+1,"_")),i}var a=e.join("");try{var o=v(a);return"function"==typeof o?o:null}catch(e){return null}}function d(e,t){var r=e.readUntil(t);return 0===r.length?0:parseInt(r,10)}function y(e){var t=e.stream,r=t.readByte();switch(r){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return r-48;case a.TagInteger:return w(t);case a.TagLong:return m(t);case a.TagDouble:return b(t);case a.TagNull:return null;case a.TagEmpty:return"";case a.TagTrue:return!0;case a.TagFalse:return!1;case a.TagNaN:return NaN;case a.TagInfinity:return T(t);case a.TagDate:return _(e);case a.TagTime:return S(e);case a.TagBytes:return O(e);case a.TagUTF8Char:return A(e);case a.TagString:return B(e);case a.TagGuid:return k(e);case a.TagList:return C(e);case a.TagMap:return e.useHarmonyMap?R(e):I(e);case a.TagClass:return x(e),M(e);case a.TagObject:return P(e);case a.TagRef:return U(e);case a.TagError:throw new Error(E(e));default:u(r)}}function w(e){return d(e,a.TagSemicolon)}function m(e){var t=e.readUntil(a.TagSemicolon),r=parseInt(t,10);return r.toString()===t?r:t}function b(e){return parseFloat(e.readUntil(a.TagSemicolon))}function T(e){return e.readByte()===a.TagNeg?-1/0:1/0}function _(e){var t,r=e.stream,n=parseInt(r.readAsciiString(4),10),i=parseInt(r.readAsciiString(2),10)-1,o=parseInt(r.readAsciiString(2),10),u=r.readByte();if(u===a.TagTime){var s=parseInt(r.readAsciiString(2),10),c=parseInt(r.readAsciiString(2),10),l=parseInt(r.readAsciiString(2),10),f=0;(u=r.readByte())===a.TagPoint&&(f=parseInt(r.readAsciiString(3),10),(u=r.readByte())>=48&&u<=57&&(r.skip(2),(u=r.readByte())>=48&&u<=57&&(r.skip(2),u=r.readByte()))),t=u===a.TagUTC?new Date(Date.UTC(n,i,o,s,c,l,f)):new Date(n,i,o,s,c,l,f)}else t=u===a.TagUTC?new Date(Date.UTC(n,i,o)):new Date(n,i,o);return e.refer.set(t),t}function S(e){var t,r=e.stream,n=parseInt(r.readAsciiString(2),10),i=parseInt(r.readAsciiString(2),10),o=parseInt(r.readAsciiString(2),10),u=0,s=r.readByte();return s===a.TagPoint&&(u=parseInt(r.readAsciiString(3),10),(s=r.readByte())>=48&&s<=57&&(r.skip(2),(s=r.readByte())>=48&&s<=57&&(r.skip(2),s=r.readByte()))),t=s===a.TagUTC?new Date(Date.UTC(1970,0,1,n,i,o,u)):new Date(1970,0,1,n,i,o,u),e.refer.set(t),t}function O(e){var t=e.stream,r=d(t,a.TagQuote),n=t.read(r);return t.skip(1),e.refer.set(n),n}function A(e){return e.stream.readString(1)}function j(e){var t=e.stream,r=t.readString(d(t,a.TagQuote));return t.skip(1),r}function B(e){var t=j(e);return e.refer.set(t),t}function E(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagEmpty:return"";case a.TagUTF8Char:return A(e);case a.TagString:return B(e);case a.TagRef:return U(e);default:u(t)}}function k(e){var t=e.stream;t.skip(1);var r=t.readAsciiString(36);return t.skip(1),e.refer.set(r),r}function C(e){var t=e.stream,r=[];e.refer.set(r);for(var n=d(t,a.TagOpenbrace),i=0;i<n;i++)r[i]=y(e);return t.skip(1),r}function I(e){var t=e.stream,r={};e.refer.set(r);for(var n=d(t,a.TagOpenbrace),i=0;i<n;i++){var o=y(e),u=y(e);r[o]=u}return t.skip(1),r}function R(e){var t=e.stream,r=new n;e.refer.set(r);for(var i=d(t,a.TagOpenbrace),o=0;o<i;o++){var u=y(e),s=y(e);r.set(u,s)}return t.skip(1),r}function P(e){var t=e.stream,r=e.classref[d(t,a.TagOpenbrace)],n=new r.classname;e.refer.set(n);for(var i=0;i<r.count;i++)n[r.fields[i]]=y(e);return t.skip(1),n}function M(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagClass:return x(e),M(e);case a.TagObject:return P(e);case a.TagRef:return U(e);default:u(t)}}function x(e){for(var t=e.stream,r=j(e),n=d(t,a.TagOpenbrace),i=[],u=0;u<n;u++)i[u]=E(e);t.skip(1),r=function(e){var t=o.getClass(e);if(t)return t;if("function"==typeof(t=v(e)))return o.register(t,e),t;for(var r=[],n=e.indexOf("_");n>=0;)r[r.length]=n,n=e.indexOf("_",n+1);if(r.length>0){var i=e.split("");if(null===(t=p(i,r,0,"."))&&(t=p(i,r,0,"_")),"function"==typeof t)return o.register(t,e),t}return t=function(){},Object.defineProperty(t.prototype,"getClassName",{value:function(){return e}}),o.register(t,e),t}(r),e.classref.push({classname:r,count:n,fields:i})}function U(e){return e.refer.read(d(e.stream,a.TagSemicolon))}function N(e,t,r){f.call(this,e),this.useHarmonyMap=!!r,Object.defineProperties(this,{classref:{value:[]},refer:{value:t?h:new g}})}Object.defineProperties(g.prototype,{set:{value:function(e){this.ref.push(e)}},read:{value:function(e){return this.ref[e]}},reset:{value:function(){this.ref.length=0}}}),N.prototype=Object.create(f.prototype),N.prototype.constructor=N,Object.defineProperties(N.prototype,{useHarmonyMap:{value:!1,writable:!0},checkTag:{value:function(e,t){t===r&&(t=this.stream.readByte()),t!==e&&u(t,e)}},checkTags:{value:function(e,t){if(t===r&&(t=this.stream.readByte()),e.indexOf(t)>=0)return t;u(t,e)}},unserialize:{value:function(){return y(this)}},readInteger:{value:function(){return function(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case a.TagInteger:return w(e);default:u(t)}}(this.stream)}},readLong:{value:function(){return function(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case a.TagInteger:case a.TagLong:return m(e);default:u(t)}}(this.stream)}},readDouble:{value:function(){return function(e){var t=e.readByte();switch(t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t-48;case a.TagInteger:case a.TagLong:case a.TagDouble:return b(e);case a.TagNaN:return NaN;case a.TagInfinity:return T(e);default:u(t)}}(this.stream)}},readBoolean:{value:function(){return function(e){var t=e.readByte();switch(t){case a.TagTrue:return!0;case a.TagFalse:return!1;default:u(t)}}(this.stream)}},readDateWithoutTag:{value:function(){return _(this)}},readDate:{value:function(){return function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagDate:return _(e);case a.TagRef:return U(e);default:u(t)}}(this)}},readTimeWithoutTag:{value:function(){return S(this)}},readTime:{value:function(){return function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagTime:return S(e);case a.TagRef:return U(e);default:u(t)}}(this)}},readBytesWithoutTag:{value:function(){return O(this)}},readBytes:{value:function(){return function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagEmpty:return new Uint8Array(0);case a.TagBytes:return O(e);case a.TagRef:return U(e);default:u(t)}}(this)}},readStringWithoutTag:{value:function(){return B(this)}},readString:{value:function(){return E(this)}},readGuidWithoutTag:{value:function(){return k(this)}},readGuid:{value:function(){return function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagGuid:return k(e);case a.TagRef:return U(e);default:u(t)}}(this)}},readListWithoutTag:{value:function(){return C(this)}},readList:{value:function(){return function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagList:return C(e);case a.TagRef:return U(e);default:u(t)}}(this)}},readMapWithoutTag:{value:function(){return this.useHarmonyMap?R(this):I(this)}},readMap:{value:function(){return this.useHarmonyMap?function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagMap:return R(e);case a.TagRef:return U(e);default:u(t)}}(this):function(e){var t=e.stream.readByte();switch(t){case a.TagNull:return null;case a.TagMap:return I(e);case a.TagRef:return U(e);default:u(t)}}(this)}},readObjectWithoutTag:{value:function(){return P(this)}},readObject:{value:function(){return M(this)}},reset:{value:function(){this.classref.length=0,this.refer.reset()}}}),e.Reader=N}(r,r.global),function(e){var t=e.BytesIO,r=e.Writer,n=e.Reader;function i(e,n){var i=new t;return new r(i,n).serialize(e),i}function a(e,r,i){return e instanceof t||(e=new t(e)),new n(e,r,i).unserialize()}e.Formatter={serialize:function(e,t){return i(e,t).bytes},unserialize:a},e.serialize=i,e.unserialize=a}(r),function(e){e.ResultMode={Normal:0,Serialized:1,Raw:2,RawWithEndTag:3},e.Normal=e.ResultMode.Normal,e.Serialized=e.ResultMode.Serialized,e.Raw=e.ResultMode.Raw,e.RawWithEndTag=e.ResultMode.RawWithEndTag}(r),function(e,t,r){var n=t.setImmediate,i=e.Tags,a=e.ResultMode,o=e.BytesIO,u=e.Writer,s=e.Reader,c=e.Future,l=e.parseuri,f=e.isObjectEmpty,h=new Uint8Array(1);function g(){}h[0]=i.TagEnd;var v="boolean",p="string",d="number",y="function",w="object";function m(e,t,l){var m,b=[],T=-1,_=!1,S=!1,O=3e4,A=10,j=!1,B=!1,E=0,k=!1,C=[],I=!1,R=g,P=g,M=[],x=!1,U=[],N=new c,F=Object.create(null),L=null,D=!0,W=ce,z=fe,H=X,q=$,G=[],Q=[],J=[],Y=[],K=this;function X(e,t){return e=function(e,t){for(var r=0,n=M.length;r<n;r++)e=M[r].outputFilter(e,t);return e}(e,t),q(e,t).then(function(e){if(!t.oneway)return function(e,t){for(var r=M.length-1;r>=0;r--)e=M[r].inputFilter(e,t);return e}(e,t)})}function $(e,t){return K.sendAndReceive(e,t).catchError(function(r){var n=function(e,t){t.failswitch&&function(){var e=b.length;if(e>1){var t=T+1;t>=e&&(t=0,E++),m=b[T=t]}else E++;P(K)}();if(t.idempotent&&t.retried<t.retry){var r=500*++t.retried;return t.failswitch&&(r-=500*(b.length-1)),r>5e3&&(r=5e3),r>0?c.delayed(r,function(){return $(e,t)}):$(e,t)}return null}(e,t);if(null!==n)return n;throw r})}function V(e,t,r,n){H(e,t).then(r,n)}function Z(e){V(h,{retry:A,retried:0,idempotent:!0,failswitch:!0,timeout:O,client:K,userdata:{}},function(t){var n=null;try{var a=new o(t),u=new s(a,!0);switch(a.readByte()){case i.TagError:n=new Error(u.readString());break;case i.TagFunctions:var c=function(e){var t=[Object.create(null)];for(var n in e){var i=e[n].split("_"),a=i.length-1;if(a>0){for(var o=t,u=0;u<a;u++){var s=i[u];o[0][s]===r&&(o[0][s]=[Object.create(null)]),o=o[0][s]}o.push(i[a])}t.push(e[n])}return t}(u.readList());u.checkTag(i.TagEnd),re(e,c);break;default:n=new Error("Wrong Response:\r\n"+o.toString(t))}}catch(e){n=e}null!==n?N.reject(n):N.resolve(e)},N.reject)}function ee(e,t){return function(){return x?ue(e,t,Array.slice(arguments),!0):c.all(arguments).then(function(r){return ue(e,t,r,!1)})}}function te(e,t,n,i,a){if(t[i]===r&&(t[i]={},typeof a!==p&&a.constructor!==Object||(a=[a]),Array.isArray(a)))for(var o=0;o<a.length;o++){var u=a[o];if(typeof u===p)t[i][u]=ee(e,n+i+"_"+u);else for(var s in u)te(e,t[i],n+i+"_",s,u[s])}}function re(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(typeof i===p)e[i]===r&&(e[i]=ee(e,i));else for(var a in i)te(e,e,"",a,i[a])}}function ne(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;++n)t[n]=e[n]}function ie(e,t,n,i){var o=function(e){return e?{mode:a.Normal,byref:_,simple:S,onsuccess:r,onerror:r,useHarmonyMap:I,client:K,userdata:{}}:{mode:a.Normal,byref:_,simple:S,timeout:O,retry:A,retried:0,idempotent:j,failswitch:B,oneway:!1,sync:!1,onsuccess:r,onerror:r,useHarmonyMap:I,client:K,userdata:{}}}(i);if(t in e){var u=e[t];for(var s in u)s in o&&(o[s]=u[s])}for(var c=0,l=n.length;c<l&&typeof n[c]!==y;++c);if(c===l)return o;var f=n.splice(c,l-c);for(o.onsuccess=f[0],l=f.length,c=1;c<l;++c){var h=f[c];switch(typeof h){case y:o.onerror=h;break;case v:o.byref=h;break;case d:o.mode=h;break;case w:for(var g in h)g in o&&(o[g]=h[g])}}return o}function ae(e,t,r){var n=new o;n.writeByte(i.TagCall);var a=new u(n,r.simple);return a.writeString(e),(t.length>0||r.byref)&&(a.reset(),a.writeList(t),r.byref&&a.writeBoolean(!0)),n}function oe(e,t,r,n){return k?c.promise(function(i,a){C.push({batch:n,name:e,args:t,context:r,resolve:i,reject:a})}):n?function(e,t,r){return c.promise(function(n,i){U.push({args:t,name:e,context:r,resolve:n,reject:i})})}(e,t,r):function(e,t,r){r.sync&&(k=!0);var n=c.promise(function(n,i){W(e,t,r).then(function(a){try{if(r.onsuccess)try{r.onsuccess(a,t)}catch(t){r.onerror&&r.onerror(e,t),i(t)}n(a)}catch(e){i(e)}},function(t){se(e,t,r,i)})});return n.whenComplete(le(r.sync)),n}(e,t,r)}function ue(e,t,r,n){return oe(t,r,ie(e,t,r,n),n)}function se(e,t,r,n){try{r.onerror?r.onerror(e,t):R(e,t),n(t)}catch(e){n(e)}}function ce(e,t,r){var n=ae(e,t,r);return n.writeByte(i.TagEnd),c.promise(function(e,u){V(n.bytes,r,function(n){if(r.oneway)e();else{var c=null,l=null;try{if(r.mode===a.RawWithEndTag)c=n;else if(r.mode===a.Raw)c=n.subarray(0,n.byteLength-1);else{var f=new o(n),h=new s(f,!1,r.useHarmonyMap),g=f.readByte();if(g===i.TagResult){if(c=r.mode===a.Serialized?h.readRaw():h.unserialize(),(g=f.readByte())===i.TagArgument)h.reset(),ne(h.readList(),t),g=f.readByte()}else g===i.TagError&&(l=new Error(h.readString()),g=f.readByte());g!==i.TagEnd&&(l=new Error("Wrong Response:\r\n"+o.toString(n)))}}catch(e){l=e}l?u(l):e(c)}},u)})}function le(e){return function(){e&&(k=!1,n(function(e){e.forEach(function(e){"settings"in e?he(e.settings).then(e.resolve,e.reject):oe(e.name,e.args,e.context,e.batch).then(e.resolve,e.reject)})},C),C=[])}}function fe(e,t){var r=e.reduce(function(e,t){return e.write(ae(t.name,t.args,t.context)),e},new o);return r.writeByte(i.TagEnd),c.promise(function(n,u){V(r.bytes,t,function(r){if(t.oneway)n(e);else{var c=-1,l=new o(r),f=new s(l,!1),h=l.readByte();try{for(;h!==i.TagEnd;){var g=null,v=null,p=e[++c].context.mode;if(p>=a.Raw&&(g=new o),h===i.TagResult){if(p===a.Serialized?g=f.readRaw():p>=a.Raw?(g.writeByte(i.TagResult),g.write(f.readRaw())):(f.useHarmonyMap=e[c].context.useHarmonyMap,f.reset(),g=f.unserialize()),(h=l.readByte())===i.TagArgument){if(p>=a.Raw)g.writeByte(i.TagArgument),g.write(f.readRaw());else f.reset(),ne(f.readList(),e[c].args);h=l.readByte()}}else h===i.TagError&&(p>=a.Raw?(g.writeByte(i.TagError),g.write(f.readRaw())):(f.reset(),v=new Error(f.readString())),h=l.readByte());if([i.TagEnd,i.TagResult,i.TagError].indexOf(h)<0)return void u(new Error("Wrong Response:\r\n"+o.toString(r)));p>=a.Raw?(p===a.RawWithEndTag&&g.writeByte(i.TagEnd),e[c].result=g.bytes):e[c].result=g,e[c].error=v}}catch(e){return void u(e)}n(e)}},u)})}function he(e){if(e=e||{},x=!1,k)return c.promise(function(t,r){C.push({batch:!0,settings:e,resolve:t,reject:r})});if(0===U.length)return c.value([]);var t=function(e){var t={timeout:O,retry:A,retried:0,idempotent:j,failswitch:B,oneway:!1,sync:!1,client:K,userdata:{}};for(var r in e)r in t&&(t[r]=e[r]);return t}(e);t.sync&&(k=!0);var r=U;U=[];var n=c.promise(function(e,n){z(r,t).then(function(t){t.forEach(function(e){if(e.error)se(e.name,e.error,e.context,e.reject);else try{if(e.context.onsuccess)try{e.context.onsuccess(e.result,e.args)}catch(t){e.context.onerror&&e.context.onerror(e.name,t),e.reject(t)}e.resolve(e.result)}catch(t){e.reject(t)}delete e.context,delete e.resolve,delete e.reject}),e(t)},function(e){r.forEach(function(t){"reject"in t&&se(t.name,e,t.context,t.reject)}),n(e)})});return n.whenComplete(le(t.sync)),n}function ge(e){if(typeof e===p)b=[e];else{if(!Array.isArray(e))return;(b=e.slice(0)).sort(function(){return Math.random()-.5})}m=b[T=0]}function ve(e){e&&"function"==typeof e.inputFilter&&"function"==typeof e.outputFilter&&M.push(e)}function pe(e,t,i){i===r&&(typeof t===v&&(i=t,t=!1),t||(typeof e===v?(i=e,e=!1):(e&&e.constructor===Object||Array.isArray(e))&&(t=e,e=!1)));var a=K;if(i&&(a={}),!e&&!m)return new Error("You should set server uri first!");if(e&&(m=e),(typeof t===p||t&&t.constructor===Object)&&(t=[t]),Array.isArray(t))re(a,t);else{if("undefined"==typeof Proxy)return n(Z,a),N;a=new Proxy({},new function e(t,n){var i={};this.get=function(a,o){var u=o.toString();if(n&&(u=n+"_"+u),"then"===u)return r;if(!a.hasOwnProperty(u)){i[u]={};var s=new e(t,u),c=t(i,u);s.apply=function(e,t,r){return c.apply(null,r)},s.set=function(e,t,r){return i[u][t]=r,!0},a[u]=new Proxy(function(){},s)}return a[u]}}(ee))}return N.resolve(a),a}function de(e,t){if(F[e]){var r=F[e];if(r[t])return r[t]}return null}function ye(e,t,r){if(e)if(typeof r===y){var n=e[t];if(n){var i=n.callbacks,a=i.indexOf(r);a>=0&&(i[a]=i[i.length-1],i.length--),0===i.length&&delete e[t]}}else delete e[t]}function we(){return null===L&&(L=ue(K,"#",[],!1)),L}we.sync=!0,we.idempotent=!0,we.failswitch=!0;var me=Object.create(null,{begin:{value:function(){x=!0}},end:{value:he},use:{value:function(e){return function(e){Q.push(e),z=Q.reduceRight(function(e,t){return function(r,n){return c.toPromise(t(r,n,e))}},fe)}(e),me}}}),be=Object.create(null,{use:{value:function(e){return function(e){J.push(e),H=J.reduceRight(function(e,t){return function(r,n){return c.toPromise(t(r,n,e))}},X)}(e),be}}}),Te=Object.create(null,{use:{value:function(e){return function(e){Y.push(e),q=Y.reduceRight(function(e,t){return function(r,n){return c.toPromise(t(r,n,e))}},$)}(e),Te}}});Object.defineProperties(this,{"#":{value:we},onerror:{get:function(){return R},set:function(e){typeof e===y&&(R=e)}},onfailswitch:{get:function(){return P},set:function(e){typeof e===y&&(P=e)}},uri:{get:function(){return m}},uriList:{get:function(){return b},set:ge},id:{get:function(){return L}},failswitch:{get:function(){return B},set:function(e){B=!!e}},failround:{get:function(){return E}},timeout:{get:function(){return O},set:function(e){O="number"==typeof e?0|e:0}},retry:{get:function(){return A},set:function(e){A="number"==typeof e?0|e:0}},idempotent:{get:function(){return j},set:function(e){j=!!e}},keepAlive:{get:function(){return D},set:function(e){D=!!e}},byref:{get:function(){return _},set:function(e){_=!!e}},simple:{get:function(){return S},set:function(e){S=!!e}},useHarmonyMap:{get:function(){return I},set:function(e){I=!!e}},filter:{get:function(){return 0===M.length?null:1===M.length?M[0]:M.slice()},set:function(e){M.length=0,Array.isArray(e)?e.forEach(function(e){ve(e)}):ve(e)}},addFilter:{value:ve},removeFilter:{value:function(e){var t=M.indexOf(e);return-1!==t&&(M.splice(t,1),!0)}},filters:{get:function(){return M}},useService:{value:pe},invoke:{value:function(e,t,r){var n=arguments.length;if(n<1||typeof e!==p)throw new Error("name must be a string");if(1===n&&(t=[]),2===n&&!Array.isArray(t)){var i=[];typeof t!==y&&i.push(g),i.push(t),t=i}if(n>2){typeof r!==y&&t.push(g);for(var a=2;a<n;a++)t.push(arguments[a])}return ue(K,e,t,x)}},ready:{value:function(e,t){return N.then(e,t)}},subscribe:{value:function e(t,n,i,a,o){if(typeof t!==p)throw new TypeError("topic name must be a string.");if(n===r||null===n){if(typeof i!==y)throw new TypeError("callback must be a function.");n=i}if(F[t]||(F[t]=Object.create(null)),typeof n===y)return a=i,i=n,void we().then(function(r){e(t,r,i,a,o)});if(typeof i!==y)throw new TypeError("callback must be a function.");if(c.isPromise(n))n.then(function(r){e(t,r,i,a,o)});else{a===r&&(a=3e5);var u=de(t,n);if(null===u){var s=function(){ue(K,t,[n,u.handler,s,{idempotent:!0,failswitch:o,timeout:a}],!1)};u={handler:function(e){var r=de(t,n);if(r){if(null!==e)for(var i=r.callbacks,a=0,o=i.length;a<o;++a)try{i[a](e)}catch(e){}null!==de(t,n)&&s()}},callbacks:[i]},F[t][n]=u,s()}else u.callbacks.indexOf(i)<0&&u.callbacks.push(i)}}},unsubscribe:{value:function e(t,n,i){if(typeof t!==p)throw new TypeError("topic name must be a string.");if(n===r||null===n){if(typeof i!==y)return void delete F[t];n=i}if(typeof n===y&&(i=n,n=null),null===n)if(null===L){if(F[t]){var a=F[t];for(n in a)ye(a,n,i)}}else L.then(function(r){e(t,r,i)});else c.isPromise(n)?n.then(function(r){e(t,r,i)}):ye(F[t],n,i);f(F[t])&&delete F[t]}},isSubscribed:{value:function(e){return!!F[e]}},subscribedList:{value:function(){var e=[];for(var t in F)e.push(t);return e}},use:{value:function(e){return function(e){G.push(e),W=G.reduceRight(function(e,t){return function(r,n,i){return c.toPromise(t(r,n,i,e))}},ce)}(e),K}},batch:{value:me},beforeFilter:{value:be},afterFilter:{value:Te}}),l&&typeof l===w&&["failswitch","timeout","retry","idempotent","keepAlive","byref","simple","useHarmonyMap","filter"].forEach(function(e){e in l&&(K[e]=l[e])}),e&&(ge(e),pe(t))}function b(e){var t=l(e).protocol;if("http:"!==t&&"https:"!==t&&"tcp:"!==t&&"tcp4:"!==t&&"tcp6:"!==t&&"tcps:"!==t&&"tcp4s:"!==t&&"tcp6s:"!==t&&"tls:"!==t&&"ws:"!==t&&"wss:"!==t)throw new Error("The "+t+" client isn't implemented.")}Object.defineProperty(m,"create",{value:function(t,r,n){try{return e.HttpClient.create(t,r,n)}catch(e){}try{return e.TcpClient.create(t,r,n)}catch(e){}try{return e.WebSocketClient.create(t,r,n)}catch(e){}if("string"==typeof t)b(t);else if(Array.isArray(t))throw t.forEach(function(e){b(e)}),new Error("Not support multiple protocol.");throw new Error("You should set server uri first!")}}),e.Client=m}(r,r.global),function(e){var t=e.parseuri,r={};e.cookieManager={setCookie:function(e,n){var i,a,o=t(n).host;function u(e){var t,n,i;for(n={},void 0===(e=(t=e.replace(/(^\s*)|(\s*$)/g,"").split(";"))[0].replace(/(^\s*)|(\s*$)/g,"").split("=",2))[1]&&(e[1]=null),n.name=e[0],n.value=e[1],i=1;i<t.length;i++)void 0===(e=t[i].replace(/(^\s*)|(\s*$)/g,"").split("=",2))[1]&&(e[1]=null),n[e[0].toUpperCase()]=e[1];n.PATH?('"'===n.PATH.charAt(0)&&(n.PATH=n.PATH.substr(1)),'"'===n.PATH.charAt(n.PATH.length-1)&&(n.PATH=n.PATH.substr(0,n.PATH.length-1))):n.PATH="/",n.EXPIRES&&(n.EXPIRES=Date.parse(n.EXPIRES)),n.DOMAIN?n.DOMAIN=n.DOMAIN.toLowerCase():n.DOMAIN=o,n.SECURE=void 0!==n.SECURE,void 0===r[n.DOMAIN]&&(r[n.DOMAIN]={}),r[n.DOMAIN][n.name]=n}for(i in e)a=e[i],"set-cookie"!==(i=i.toLowerCase())&&"set-cookie2"!==i||("string"==typeof a&&(a=[a]),a.forEach(u))},getCookie:function(e){var n=t(e),i=n.host,a=n.path,o="https:"===n.protocol,u=[];for(var s in r)if(i.indexOf(s)>-1){var c=[];for(var l in r[s]){var f=r[s][l];f.EXPIRES&&(new Date).getTime()>f.EXPIRES?c.push(l):0===a.indexOf(f.PATH)&&(o&&f.SECURE||!f.SECURE)&&null!==f.value&&u.push(f.name+"="+f.value)}for(var h in c)delete r[s][c[h]]}return u.length>0?u.join("; "):""}}}(r),function(e,t,r){var n=e.Client,i=e.Future,a=e.BytesIO,o=t.TimeoutError,u=t.location!==r&&"file:"===t.location.protocol,s=t.XMLHttpRequest,c=!u&&void 0!==s&&"withCredentials"in new s,l=e.parseuri,f=e.cookieManager;function h(){}function g(e,u,l){if(this.constructor!==g)return new g(e,u,l);n.call(this,e,u,l);var v=Object.create(null),p=h,d=h,y=this;function w(e){var t,r,n=Object.create(null);for(t in v)n[t]=v[t];if(e)for(t in e)r=e[t],Array.isArray(r)?n[t]=r.join(", "):n[t]=r;return n}function m(e,t){var n=new i,a=new s;a.open("POST",y.uri,!0),c&&(a.withCredentials="true"),a.responseType="arraybuffer";var u=w(t.httpHeader);for(var l in u)a.setRequestHeader(l,u[l]);if(a.onload=function(){if(a.onload=h,a.status){var e=a.getAllResponseHeaders();t.httpHeader=function(e){var t=Object.create(null);if(e)for(var r=0,n=(e=e.split("\r\n")).length;r<n;r++)if(""!==e[r]){var i=e[r].split(": ",2),a=i[0].trim(),o=i[1].trim();a in t?Array.isArray(t[a])?t[a].push(o):t[a]=[t[a],o]:t[a]=o}return t}(e),200===a.status?n.resolve(new Uint8Array(a.response)):n.reject(new Error(a.status+":"+a.statusText))}},a.onerror=function(){n.reject(new Error("error"))},a.upload!==r&&(a.upload.onprogress=p),a.onprogress=d,t.timeout>0&&(n=n.timeout(t.timeout).catchError(function(e){throw a.onload=h,a.onerror=h,a.abort(),e},function(e){return e instanceof o})),e.constructor===String||ArrayBuffer.isView)a.send(e);else if(e.buffer.slice)a.send(e.buffer.slice(0,e.length));else{var f=new Uint8Array(e.length);f.set(e),a.send(f.buffer)}return n}function b(e){"function"==typeof e&&(p=e)}function T(){return p}Object.defineProperties(this,{onprogress:{get:T,set:b},onRequestProgress:{get:T,set:b},onResponseProgress:{get:function(){return d},set:function(e){"function"==typeof e&&(d=e)}},setHeader:{value:function(e,t){"content-type"!==e.toLowerCase()&&"content-length"!==e.toLowerCase()&&(t?v[e]=t:delete v[e])}},sendAndReceive:{value:function(e,r){var n=void 0!==t.api&&void 0!==t.api.ajax?function(e,r){var n=new i,o=w(r.httpHeader),u=f.getCookie(y.uri());return""!==u&&(o.Cookie=u),t.api.ajax({url:y.uri,method:"post",data:{body:a.toString(e)},timeout:r.timeout,dataType:"text",headers:o,returnAll:!0,certificate:y.certificate},function(e,t){e?(r.httpHeader=e.headers,200===e.statusCode?(f.setCookie(e.headers,y.uri),n.resolve(new a(e.body).takeBytes())):n.reject(new Error(e.statusCode+":"+e.body))):n.reject(new Error(t.msg))}),n}(e,r):m(e,r);return r.oneway&&n.resolve(),n}}})}function v(e){var t=l(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}Object.defineProperty(g,"create",{value:function(e,t,r){if("string"==typeof e)v(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){v(e)})}return new g(e,t,r)}}),e.HttpClient=g}(r,r.global),function(e,t,r){var n=e.BytesIO,i=e.Client,a=e.Future,o=t.TimeoutError,u=e.parseuri,s=t.WebSocket||t.MozWebSocket;function c(){}function l(e,t,u){if(void 0===s)throw new Error("WebSocket is not supported by this browser.");if(this.constructor!==l)return new l(e,t,u);i.call(this,e,t,u);var f=0,h=0,g=[],v=[],p=null,d=null,y=this;function w(e,t){var r=new n;r.writeInt32BE(e),t.constructor===String?r.writeString(t):r.write(t);var i=r.bytes;ArrayBuffer.isView?d.send(i):i.buffer.slice?d.send(i.buffer.slice(0,i.length)):d.send(i.buffer)}function m(e){p.resolve(e)}function b(e){var t=new n(e.data),i=t.readInt32BE(),a=g[i];if(delete g[i],a!==r&&(--h,a.resolve(t.read(t.length-4))),h<100&&v.length>0){++h;var o=v.pop();p.then(function(){w(o[0],o[1])})}0!==h||y.keepAlive||_()}function T(e){g.forEach(function(t,r){t.reject(new Error(e.code+":"+e.reason)),delete g[r]}),h=0,d=null}function _(){null!==d&&(d.onopen=c,d.onmessage=c,d.onclose=c,d.close())}Object.defineProperties(this,{sendAndReceive:{value:function(e,t){var r=f<2147483647?++f:f=0,n=new a;return g[r]=n,t.timeout>0&&(n=n.timeout(t.timeout).catchError(function(e){throw delete g[r],--h,_(),e},function(e){return e instanceof o})),null!==d&&d.readyState!==s.CLOSING&&d.readyState!==s.CLOSED||(p=new a,(d=new s(y.uri)).binaryType="arraybuffer",d.onopen=m,d.onmessage=b,d.onerror=c,d.onclose=T),h<100?(++h,p.then(function(){w(r,e)})):v.push([r,e]),t.oneway&&n.resolve(),n}},close:{value:_}})}function f(e){var t=u(e);if("ws:"!==t.protocol&&"wss:"!==t.protocol)throw new Error("This client desn't support "+t.protocol+" scheme.")}Object.defineProperty(l,"create",{value:function(e,t,r){if("string"==typeof e)f(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){f(e)})}return new l(e,t,r)}}),e.WebSocketClient=l}(r,r.global),function(e,t,r){var n=e.Future;function i(){}var a={},o=null;function u(e){a[e.socketId].onreceive(e.data)}function s(e){var t=a[e.socketId];t.onerror(e.resultCode),t.destroy()}function c(){null===o&&((o=t.chrome.sockets.tcp).onReceive.addListener(u),o.onReceiveError.addListener(s)),this.socketId=new n,this.connected=!1,this.timeid=r,this.onclose=i,this.onconnect=i,this.onreceive=i,this.onerror=i}Object.defineProperties(c.prototype,{connect:{value:function(e,t,r){var n=this;o.create({persistent:r&&r.persistent},function(i){r&&("noDelay"in r&&o.setNoDelay(i.socketId,r.noDelay,function(e){e<0&&(n.socketId.reject(e),o.disconnect(i.socketId),o.close(i.socketId),n.onclose())}),"keepAlive"in r&&o.setKeepAlive(i.socketId,r.keepAlive,function(e){e<0&&(n.socketId.reject(e),o.disconnect(i.socketId),o.close(i.socketId),n.onclose())})),r&&r.tls?o.setPaused(i.socketId,!0,function(){o.connect(i.socketId,e,t,function(e){e<0?(n.socketId.reject(e),o.disconnect(i.socketId),o.close(i.socketId),n.onclose()):o.secure(i.socketId,function(t){0!==t?(n.socketId.reject(e),o.disconnect(i.socketId),o.close(i.socketId),n.onclose()):o.setPaused(i.socketId,!1,function(){n.socketId.resolve(i.socketId)})})})}):o.connect(i.socketId,e,t,function(e){e<0?(n.socketId.reject(e),o.disconnect(i.socketId),o.close(i.socketId),n.onclose()):n.socketId.resolve(i.socketId)})}),this.socketId.then(function(e){a[e]=n,n.connected=!0,n.onconnect(e)},function(e){n.onerror(e)})}},send:{value:function(e){var t=this,r=new n;return this.socketId.then(function(n){o.send(n,e,function(e){e.resultCode<0?(t.onerror(e.resultCode),r.reject(e.resultCode),t.destroy()):r.resolve(e.bytesSent)})}),r}},destroy:{value:function(){var e=this;this.connected=!1,this.socketId.then(function(t){o.disconnect(t),o.close(t),delete a[t],e.onclose()})}},ref:{value:function(){this.socketId.then(function(e){o.setPaused(e,!1)})}},unref:{value:function(){this.socketId.then(function(e){o.setPaused(e,!0)})}},clearTimeout:{value:function(){this.timeid!==r&&t.clearTimeout(this.timeid)}},setTimeout:{value:function(e,r){this.clearTimeout(),this.timeid=t.setTimeout(r,e)}}}),e.ChromeTcpSocket=c}(r,r.global),function(e,t,r){var n=e.Future,i=t.atob,a=t.btoa,o=e.toUint8Array,u=e.toBinaryString;function s(){}var c=null;function l(){null===c&&(c=t.api.require("socketManager")),this.socketId=new n,this.connected=!1,this.timeid=r,this.onclose=s,this.onconnect=s,this.onreceive=s,this.onerror=s}Object.defineProperties(l.prototype,{connect:{value:function(e,t,r){var n=this;c.createSocket({type:"tcp",host:e,port:t,timeout:r.timeout,returnBase64:!0},function(e){if(e)switch(e.state){case 101:break;case 102:n.socketId.resolve(e.sid);break;case 103:n.onreceive(o(i(e.data.replace(/\s+/g,""))));break;case 201:n.socketId.reject(new Error("Create TCP socket failed"));break;case 202:n.socketId.reject(new Error("TCP connection failed"));break;case 203:n.onclose(),n.onerror(new Error("Abnormal disconnect connection"));break;case 204:n.onclose();break;case 205:n.onclose(),n.onerror(new Error("Unknown error"))}}),this.socketId.then(function(e){n.connected=!0,n.onconnect(e)},function(e){n.onerror(e)})}},send:{value:function(e){var t=this,r=new n;return this.socketId.then(function(n){c.write({sid:n,data:a(u(e)),base64:!0},function(e,n){e.status?r.resolve():(t.onerror(new Error(n.msg)),r.reject(n.msg),t.destroy())})}),r}},destroy:{value:function(){var e=this;this.connected=!1,this.socketId.then(function(t){c.closeSocket({sid:t},function(t,r){t.status||e.onerror(new Error(r.msg))})})}},ref:{value:s},unref:{value:s},clearTimeout:{value:function(){this.timeid!==r&&t.clearTimeout(this.timeid)}},setTimeout:{value:function(e,r){this.clearTimeout(),this.timeid=t.setTimeout(r,e)}}}),e.APICloudTcpSocket=l}(r,r.global),function(e,t,r){var n=e.ChromeTcpSocket,i=e.APICloudTcpSocket,a=e.Client,o=e.BytesIO,u=e.Future,s=t.TimeoutError,c=e.parseuri;function l(){}function f(e,t){e.onreceive=function(r){"receiveEntry"in e||(e.receiveEntry={stream:new o,headerLength:4,dataLength:-1,id:null});var n=e.receiveEntry,i=n.stream,a=n.headerLength,u=n.dataLength,s=n.id;for(i.write(r);u<0&&i.length>=a&&0!=(2147483648&(u=i.readInt32BE()))&&(u&=2147483647,a=8),8===a&&null===s&&i.length>=a&&(s=i.readInt32BE()),u>=0&&i.length-a>=u;)t(i.read(u),s),a=4,s=null,i.trunc(),u=-1;n.stream=i,n.headerLength=a,n.dataLength=u,n.id=s}}function h(e){e&&(this.client=e,this.uri=this.client.uri,this.size=0,this.pool=[],this.requests=[])}function g(e){h.call(this,e)}function v(e){h.call(this,e)}function p(e,t,r){if(this.constructor!==p)return new p(e,t,r);a.call(this,e,t,r);var n=this,i=!0,o=!1,s=10,c=3e4,l=null,f=null;Object.defineProperties(this,{noDelay:{get:function(){return i},set:function(e){i=!!e}},fullDuplex:{get:function(){return o},set:function(e){o=!!e}},maxPoolSize:{get:function(){return s},set:function(e){"number"==typeof e?(s=0|e)<1&&(s=10):s=10}},poolTimeout:{get:function(){return c},set:function(e){c="number"==typeof e?0|e:0}},sendAndReceive:{value:function(e,t){var r=new u;return o?(null!==l&&l.uri===n.uri||(l=new g(n)),l.sendAndReceive(e,r,t)):(null!==f&&f.uri===n.uri||(f=new v(n)),f.sendAndReceive(e,r,t)),t.oneway&&r.resolve(),r}}})}function d(e){var t=c(e).protocol;if("tcp:"!==t&&"tcp4:"!==t&&"tcp6:"!==t&&"tcps:"!==t&&"tcp4s:"!==t&&"tcp6s:"!==t&&"tls:"!==t)throw new Error("This client desn't support "+t+" scheme.")}Object.defineProperties(h.prototype,{create:{value:function(){var e,r,a=c(this.uri),o=a.protocol,u=a.hostname,s=parseInt(a.port,10);if("tcp:"===o||"tcp4:"===o||"tcp6:"===o)e=!1;else{if("tcps:"!==o&&"tcp4s:"!==o&&"tcp6s:"!==o&&"tls:"!==o)throw new Error("Unsupported "+o+" protocol!");e=!0}if(t.chrome&&t.chrome.sockets&&t.chrome.sockets.tcp)r=new n;else{if(!t.api||!t.api.require)throw new Error("TCP Socket is not supported by this browser or platform.");r=new i}var l=this;return r.connect(u,s,{persistent:!0,tls:e,timeout:this.client.timeout,noDelay:this.client.noDelay,keepAlive:this.client.keepAlive}),r.onclose=function(){--l.size},++this.size,r}}}),g.prototype=Object.create(h.prototype,{fetch:{value:function(){for(var e=this.pool;e.length>0;){var t=e.pop();if(t.connected)return 0===t.count&&(t.clearTimeout(),t.ref()),t}return null}},init:{value:function(e){var t=this;e.count=0,e.futures={},e.timeoutIds={},f(e,function(r,n){var i=e.futures[n];i&&(t.clean(e,n),0===e.count&&t.recycle(e),i.resolve(r))}),e.onerror=function(r){var n=e.futures;for(var i in n){var a=n[i];t.clean(e,i),a.reject(r)}}}},recycle:{value:function(e){e.unref(),e.setTimeout(this.client.poolTimeout,function(){e.destroy()})}},clean:{value:function(e,r){void 0!==e.timeoutIds[r]&&(t.clearTimeout(e.timeoutIds[r]),delete e.timeoutIds[r]),delete e.futures[r],--e.count,this.sendNext(e)}},sendNext:{value:function(e){if(e.count<10)if(this.requests.length>0){var t=this.requests.pop();t.push(e),this.send.apply(this,t)}else this.pool.lastIndexOf(e)<0&&this.pool.push(e)}},send:{value:function(e,r,n,i,a){var u=this,c=i.timeout;c>0&&(a.timeoutIds[n]=t.setTimeout(function(){u.clean(a,n),0===a.count&&u.recycle(a),r.reject(new s("timeout"))},c)),a.count++,a.futures[n]=r;var l=e.length,f=new o(8+l);f.writeInt32BE(2147483648|l),f.writeInt32BE(n),f.write(e),a.send(f.buffer).then(function(){u.sendNext(a)})}},getNextId:{value:function(){return this.nextid<2147483647?++this.nextid:this.nextid=0}},sendAndReceive:{value:function(e,t,r){var n=this.fetch(),i=this.getNextId();if(n)this.send(e,t,i,r,n);else if(this.size<this.client.maxPoolSize){(n=this.create()).onerror=function(e){t.reject(e)};var a=this;n.onconnect=function(){a.init(n),a.send(e,t,i,r,n)}}else this.requests.push([e,t,i,r])}}}),g.prototype.constructor=h,v.prototype=Object.create(h.prototype,{fetch:{value:function(){for(var e=this.pool;e.length>0;){var t=e.pop();if(t.connected)return t.clearTimeout(),t.ref(),t}return null}},recycle:{value:function(e){this.pool.lastIndexOf(e)<0&&(e.unref(),e.setTimeout(this.client.poolTimeout,function(){e.destroy()}),this.pool.push(e))}},clean:{value:function(e){e.onreceive=l,e.onerror=l,void 0!==e.timeoutId&&(t.clearTimeout(e.timeoutId),delete e.timeoutId)}},sendNext:{value:function(e){if(this.requests.length>0){var t=this.requests.pop();t.push(e),this.send.apply(this,t)}else this.recycle(e)}},send:{value:function(e,r,n,i){var a=this,u=n.timeout;u>0&&(i.timeoutId=t.setTimeout(function(){a.clean(i),i.destroy(),r.reject(new s("timeout"))},u)),f(i,function(e){a.clean(i),a.sendNext(i),r.resolve(e)}),i.onerror=function(e){a.clean(i),r.reject(e)};var c=e.length,l=new o(4+c);l.writeInt32BE(c),l.write(e),i.send(l.buffer)}},sendAndReceive:{value:function(e,t,r){var n=this.fetch();if(n)this.send(e,t,r,n);else if(this.size<this.client.maxPoolSize){var i=this;(n=this.create()).onerror=function(e){t.reject(e)},n.onconnect=function(){i.send(e,t,r,n)}}else this.requests.push([e,t,r])}}}),v.prototype.constructor=h,Object.defineProperty(p,"create",{value:function(e,t,r){if("string"==typeof e)d(e);else{if(!Array.isArray(e))throw new Error("You should set server uri first!");e.forEach(function(e){d(e)})}return new p(e,t,r)}}),e.TcpClient=p}(r,r.global),function(e){var t=e.Tags,r=e.BytesIO,n=e.Writer,i=e.Reader,a=1;function o(e){this.version=e||"2.0"}o.prototype.inputFilter=function(e){var i=r.toString(e);"{"===i.charAt(0)&&(i="["+i+"]");for(var a=JSON.parse(i),o=new r,u=new n(o,!0),s=0,c=a.length;s<c;++s){var l=a[s];l.error?(o.writeByte(t.TagError),u.writeString(l.error.message)):(o.writeByte(t.TagResult),u.serialize(l.result))}return o.writeByte(t.TagEnd),o.bytes},o.prototype.outputFilter=function(e){var n=[],o=new r(e),u=new i(o,!1,!1),s=o.readByte();do{var c={};s===t.TagCall&&(c.method=u.readString(),(s=o.readByte())===t.TagList&&(c.params=u.readListWithoutTag(),s=o.readByte()),s===t.TagTrue&&(s=o.readByte())),"1.1"===this.version?c.version="1.1":"2.0"===this.version&&(c.jsonrpc="2.0"),c.id=a++,n.push(c)}while(s===t.TagCall);return n.length>1?JSON.stringify(n):JSON.stringify(n[0])},e.JSONRPCClientFilter=o}(r),function(t){t.common={Completer:t.Completer,Future:t.Future,ResultMode:t.ResultMode},t.io={BytesIO:t.BytesIO,ClassManager:t.ClassManager,Tags:t.Tags,RawReader:t.RawReader,Reader:t.Reader,Writer:t.Writer,Formatter:t.Formatter},t.client={Client:t.Client,HttpClient:t.HttpClient,TcpClient:t.TcpClient,WebSocketClient:t.WebSocketClient},t.filter={JSONRPCClientFilter:t.JSONRPCClientFilter},e.exports=t}(r)}(r={exports:{}},r.exports),r.exports);const i=3e4,a=["accept","act","begin","commit","checkFile","checkRight","closeTunnel","createInvCode","createFileByData","deleteFile","deleteInvCode","del","exit","expire","get","getAppDownloadKey","getGShortUrlKey","getInvCodeInfo","getInvTemplate","getLFileData","getLShortUrlKey","getResByName","getTempFileMac","getUserInfo","getVar","getVarByContext","grant","hDel","hGet","hGetAll","hKeys","hLen","hMClear","hMGet","hMSet","hRevScan","hScan","hset","hSet","incr","invite","lClear","lExpire","lExpireAt","lIndex","lLen","login","lPersist","lPop","lPush","lRange","lSet","lTtl","lMClear","openTempFile","openTunnel","proxyGet","proxyPost","pullMsg","readMsg","register","restart","rollback","rPop","rPush","runScript","registerScript","runByScriptID","taskRunInBackground","run","sAdd","scan","sCard","sClear","sDiff","sendmail","sendMsg","set","setData","setHostIp","setInvTemplate","setLFileData","setUserInfo","sInter","sMClear","sMembers","sRem","sUnion","temp2LFile","test","updateInvCode","ugVerifyCode","userGroupAddManager","userGroupAddMember","userGroupCreate","userGroupDelManager","userGroupDelMember","userGroupDestroy","userGroupGetInfo","userGroupJoin","userGroupSetInfo","unInstallApp","uploadApp","uploadAppFile","veni","version","zAdd","zCard","zCount","zRange","zRangeByScore","zRank","zRem","zScore","hIncrBy","removeUser","logout","strLen","zRemRangeByScore","zMClear","zClear","setDomain","showDomain","delDomain"];e.initLAPI=function(e,t=!1){return(t?n.Client.create:n.HttpClient.bind(n))(e,a,{timeout:i})},Object.defineProperty(e,"__esModule",{value:!0})});
